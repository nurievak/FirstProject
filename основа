# include "TXLib.h"
void hare (int x, int y, int size);
void tree (int x, int y, int size, int widthLine, int nLine);
void Man (int x, int y, double size, int widthLine, double rHand, int CHat1, int CHat2, int CHat3, double Mouth);

int x = 300;
double size = 3;
double rHand = -100;
double Mouth = 0;
int CHat1 = 100;
int CHat2 = 20;
int CHat3 = 26;
int main ()
    {
    txCreateWindow (1600, 900);
    txSetFillColor (TX_WHITE);
    txRectangle(0, 0, 1600, 900);
    /*
    Man (415, 120, 1, 2,   0, 253,  72,  57, 0);
    Man (200, 200, 2, 3, -90, 134, 107, 203, 7);
    Man (600, 200, 2, 3,  47, 166, 172, 138, 3);
    */
//-------------------------------СЦЕНА 7----------------------------
    for(int z = 0; z <= 23; z++)
       {
        txSetFillColor (TX_LIGHTGREEN);
        txRectangle(0, 600, 1600, 900);
        txSetFillColor (RGB(191, 242, 240));
        txRectangle(0, 0, 1600, 600);
        tree (300, 350, 5, 2, 30);
        tree (600, 400, 4, 2, 30);
        tree (1300, 350, 5, 2, 30);
        Man (x, 450, size, 3, rHand, CHat1, CHat2, CHat3, Mouth);
        if (z <= 7)
           {
           for(int a = 1; a <= 20; a++)
              {
              Mouth = Mouth + 1.5*a;
              break;
              }
           }
           for(long rast = 1; rast <= 4; rast++)
              {
              rHand = rHand + 0.58*rast;
              }
            x = x + 5*z;
            for(int n = 1; n <= 100; n++)
              {
              CHat1 = CHat1 + 1*n;
              CHat2 = CHat2 + 2*n;
              CHat3 = CHat3 + 1*n;
              }
            //for(int b = 1; b <= 5; b++)
            //  {
            //  size = size - 0.01*b;
            //  }
        txSetTextAlign (TA_CENTER);
        txSetColor     (TX_BLACK);
        txTextOut      (800, 850, "Ура, получилось, как же меня выручил зайчик, - кричал мальчик.");
        txSleep(150);
        txSetFillColor (TX_WHITE);
        txClear();
        }
//-------------------------------СЦЕНА 8----------------------------
    for(int z = 0; z <= 23; z++)
       {
        txSetFillColor (TX_LIGHTGREEN);
        txRectangle(0, 600, 1600, 900);
        txSetFillColor (RGB(191, 242, 240));
        txRectangle(0, 0, 1600, 600);
        tree (800, 400, 4, 2, 30);
        tree (1300, 350, 5, 2, 30);
        Man (x-1900, 450, size, 3, rHand, CHat1, CHat2, CHat3, 10);
        x = x + 1.96*z;
        hare (650, 550, size);
        for(int n = 1; n <= 100; n++)
            {
            CHat1 = CHat1 + 1*n;
            CHat2 = CHat2 + 2*n;
              CHat3 = CHat3 + 1*n;
            }
        txSleep(150);
        txSetFillColor (TX_WHITE);
        txClear();
        }

        for(int z = 0; z <= 23; z++)
       {
        txSetFillColor (TX_LIGHTGREEN);
        txRectangle(0, 600, 1600, 900);
        txSetFillColor (RGB(191, 242, 240));
        txRectangle(0, 0, 1600, 600);
        tree (800, 400, 4, 2, 30);
        tree (1300, 350, 5, 2, 30);
        Man (x-1900, 450, size, 3, rHand, CHat1, CHat2, CHat3, 10);
        hare (650, 550, size);
        for(int n = 1; n <= 100; n++)
            {
            CHat1 = CHat1 + 1*n;
            CHat2 = CHat2 + 2*n;
              CHat3 = CHat3 + 1*n;
            }
        txSetTextAlign (TA_CENTER);
        txSetColor     (TX_BLACK);
        txTextOut      (800, 850, "Понравилось ли тебе делать кого-то другого счастливым, - спросил зайчик.");
        txSleep(150);
        txSetFillColor (TX_WHITE);
        txClear();
        }
        for(int z = 0; z <= 23; z++)
       {
        txSetFillColor (TX_LIGHTGREEN);
        txRectangle(0, 600, 1600, 900);
        txSetFillColor (RGB(191, 242, 240));
        txRectangle(0, 0, 1600, 600);
        tree (800, 400, 4, 2, 30);
        tree (1300, 350, 5, 2, 30);
        Man (x-1900, 450, size, 3, rHand, CHat1, CHat2, CHat3, 10);
        hare (650, 550, size);
        for(int n = 1; n <= 100; n++)
            {
            CHat1 = CHat1 + 1*n;
            CHat2 = CHat2 + 2*n;
              CHat3 = CHat3 + 1*n;
            }
        txSetTextAlign (TA_CENTER);
        txSetColor     (TX_BLACK);
        txTextOut      (800, 850, "Да, от этого стало теплее на душе, - ответил ему мальчик.");
        txSleep(150);
        txSetFillColor (TX_WHITE);
        txClear();
        }
        for(int z = 0; z <= 23; z++)
       {
        txSetFillColor (TX_LIGHTGREEN);
        txRectangle(0, 600, 1600, 900);
        txSetFillColor (RGB(191, 242, 240));
        txRectangle(0, 0, 1600, 600);
        tree (800, 400, 4, 2, 30);
        tree (1300, 350, 5, 2, 30);
        Man (x-1900, 450, size, 3, rHand, CHat1, CHat2, CHat3, 10);
        hare (650, 550, size);
        for(int n = 1; n <= 100; n++)
            {
            CHat1 = CHat1 + 1*n;
            CHat2 = CHat2 + 2*n;
              CHat3 = CHat3 + 1*n;
            }
        txSetTextAlign (TA_CENTER);
        txSetColor     (TX_BLACK);
        txTextOut      (800, 850, "Так вот, это самая простая шапка. Просто от улыбок других и сам начинаешь улыбаться, - раскрыл секрет зверёк.");
        txSleep(150);
        txSetFillColor (TX_WHITE);
        txClear();
        }
        for(int z = 0; z <= 23; z++)
       {
        txSetFillColor (TX_LIGHTGREEN);
        txRectangle(0, 600, 1600, 900);
        txSetFillColor (RGB(191, 242, 240));
        txRectangle(0, 0, 1600, 600);
        tree (800, 400, 4, 2, 30);
        tree (1300, 350, 5, 2, 30);
        Man (x-1900, 450, size, 3, rHand, CHat1, CHat2, CHat3, 10);
        hare (650, 550, size);
        for(int n = 1; n <= 100; n++)
            {
            CHat1 = CHat1 + 1*n;
            CHat2 = CHat2 + 2*n;
              CHat3 = CHat3 + 1*n;
            }
        txSetTextAlign (TA_CENTER);
        txSetColor     (TX_BLACK);
        txTextOut      (800, 850, "Ничего себе, а ведь и правда!");
        txSleep(150);
        txSetFillColor (TX_WHITE);
        txClear();
        }
    txSetFillColor (TX_LIGHTGREEN);
    txRectangle(0, 0, 1600, 900);
    txSetColor(RGB(0, 0, 0));
    txSelectFont("Comic Sans MS", 60);
    txTextOut(800, 450, "КОНЕЦ");

    txSleep(2000);

    txSetFillColor (RGB(255, 255, 255));
    txClear ();

    return 0;
    }





//------------------------------------------------------
//{------------------------------------------------------
//!Рисует человечка
//!
//!@param x            x, y      -- координаты начальной точки
//!@param size         size      -- размер мальчика (для масштабирования)
//!@param widthLine    widthLine -- толщина линии
//!@param rHand        rHand     -- расстояние между руками
//!@param CHat1        CHat1     -- цвет шляпы
//!@param CHat2        CHat2     -- цвет шляпы
//!@param CHat3        CHat3     -- цвет шляпы
//!@param Mouth        Mouth     -- улыбка
//!
//!@par   Пример использования:
//!@code
//!       ClearScreen(TX_BLACK);
//!@endcode
//}------------------------------------------------------

void Man (int x, int y, double size, int widthLine, double rHand, int CHat1, int CHat2, int CHat3, double Mouth)
    {
    //----- туловище
    txSetColor (RGB(5, 29, 28), widthLine);
    txSetFillColor (RGB (255, 128, 0));
    txRectangle (x - 25*size, y, x + 25*size, y + 60*size);
    //--- голова
    txSetFillColor (RGB(255, 231, 213));
    txCircle (x, y - 15*size, 15*size);
    //--- глаза
    txSetFillColor (RGB (86, 172, 235));
    txCircle (x - 5.5*size, y - 19*size, 2*size);
    txCircle (x + 5.5*size, y - 19*size, 2*size);
    //--- рот
    txSetFillColor (RGB (255, 183, 185));
    POINT mouth [4]{{x - 5*size, y - 10 - Mouth*size},
                    {x - 2*size, y - 10*size},
                    {x + 2*size, y - 10*size},
                    {x + 5*size, y - 10 - Mouth*size}};
    txPolygon(mouth, 4);
    //--- рука левая
    txSetFillColor (RGB(255, 231, 213));
    POINT handleft [3] {{x - 25*size,             y + 30*size},
                        {x - 45*size,             y + 30*size},
                        {x - 45 + (rHand/2)*size, y + 10*size}};
    txPolygon(handleft, 3);
    //--- рука правая
    POINT handright [3] {{x + 25*size,             y + 30*size},
                         {x + 45*size,             y + 30*size},
                         {x + 45 - (rHand/2)*size, y + 10*size}};
    txPolygon(handright, 3);
    //--- ноги
    txSetFillColor (RGB(155, 244, 142));
    txRectangle (x - 25*size, y + 60*size, x -  5*size, y + 120*size);
    txRectangle (x +  5*size, y + 60*size, x + 25*size, y + 120*size);
    //--- шляпа
    txSetFillColor (RGB(CHat1, CHat2, CHat3));
    POINT hat [4] {{x,           y - 50*size}, {x + 15*size, y - 30*size},
                   {x - 15*size, y - 30*size}, {x,           y - 50*size}};
    txPolygon(hat, 4);
    }

void tree (int x, int y, int size, int widthLine, int nLine)
    {
    /*
    Параметры:
    x, y - координаты
    size - размер фигуры
    widthLine - толщина линий
    nLine - толщина ножки
    */
    txSetColor (RGB(155, 110, 65), nLine);
    txLine     (x, y + 40*size, x, y + 70*size);
    txSetFillColor (RGB (90, 194, 65));
    txSetColor     (RGB (0, 0, 0), widthLine);
    POINT b1 [7] {{x - 30*size, y}, {x,           y - 40*size},
                          {x + 30*size, y}, {x + 15*size, y - 5*size},
                          {x,           y}, {x - 15*size, y - 5*size},
                          {x - 30*size, y}};
    txPolygon             (b1, 7);

    txSetFillColor (RGB(90, 194, 65));
    POINT b2[7] {{x - 30*size, y + 40*size}, {x,           y},
                         {x + 30*size, y + 40*size}, {x + 15*size, y + 35*size},
                         {x,           y + 40*size}, {x - 15*size, y + 35*size},
                         {x - 30*size, y + 40*size}};
    txPolygon            (b2, 7);

    }
void hare (int x, int y, int size)
    {
    txSetFillColor (RGB(151, 150, 149));
    POINT u1 [5]{{x - 110*size/2, y - 20*size/2},
                    {x - 130*size/2, y - 30*size/2},
                    {x - 130*size/2, y - 50*size/2},
                    {x - 110*size/2, y - 40*size/2},
                    {x - 110*size/2, y - 20*size/2}};
    txPolygon(u1, 5);
     POINT u2 [5]{{x - 70*size/2, y - 20*size/2},
                    {x - 70*size/2, y - 40*size/2},
                    {x - 50*size/2, y - 50*size/2},
                    {x - 50*size/2, y - 30*size/2},
                    {x - 70*size/2, y - 20*size/2}};
    txPolygon(u2, 5);

    txCircle (x - 90*size/2, y, 30*size/2);
    txSetFillColor (RGB(16, 16, 16));
    txCircle (x - 100*size/2, y, 3*size/2);
    txCircle (x - 80*size/2, y, 3*size/2);
    txSetFillColor (RGB(151, 150, 149));
    POINT teloz [4]{{x - 130*size/2, y +100*size/2},
                    {x - 90*size/2, y + 30*size/2},
                    {x - 50*size/2, y + 100*size/2},
                    {x - 130*size/2, y + 100*size/2}};
    txPolygon(teloz, 4);
    POINT nos [4]{{x - 95*size/2, y  + 10*size/2},
                    {x - 85*size/2, y + 10*size/2},
                    {x - 90*size/2, y + 15*size/2},
                    {x - 95*size/2, y  + 10*size/2}};
    txPolygon(nos, 4);
    txLine (x - 100*size/2, y + 20*size/2, x - 80*size/2, y + 20*size/2);
    txCircle (x - 60*size/2, y + 70*size/2, 10*size/2);
    }
